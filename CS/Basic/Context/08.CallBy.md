# ëª©ì°¨

1. [Value Type](#Value-Type)

   1-1.[Ref ì „ë‹¬ ë°©ì‹](#Ref-ì „ë‹¬-ë°©ì‹)

   1-2.[Out ì „ë‹¬ ë°©ì‹](#Out-ì „ë‹¬-ë°©ì‹)

2. [Ref Type](#Ref-Type)

<br>

# Value Type

## Ref ì „ë‹¬ ë°©ì‹

Value Type ë³€ìˆ˜(struct, int, ect..)ëŠ” stackì— ì €ì¥ëœë‹¤.

í•˜ì§€ë§Œ ë³€ìˆ˜ë¡œ ì €ì¥í•˜ê³  ì‹¶ì„ ê²½ìš° `ref`ë¥¼ ë¶™ì´ë©´ í•´ë‹¹ ì£¼ì†Œë¥¼ ì°¸ì¡°í•˜ê²Œ ëœë‹¤.

- ref

  C#ì—ì„œëŠ” Stackì— ìˆëŠ” ì£¼ì†Œê°’ì„ ê°€ë¥´í‚¬ë–„ í•´ë‹¹ì„ ì“¸ ìˆ˜ ìˆìŒ

  Stackì— ë³€ìˆ˜ë¡œ ì£¼ì†Œë¥¼ ê°€ë¥´í‚´.

- ì¸ìì— refë¥¼ í†µí•´ Call By Refë¥¼ êµ¬í˜„ ê°€ëŠ¥

  ë‹¨ ì°¸ì¡° ì „ë‹¬ì‹œ ë©”ì„œë“œì˜ ì¸ì ë‘˜ë‹¤ refë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.

  ```C#
  using System;

  class Program
  {
      public static void inc1(int n)          // Call By Value
      {
          ++n;
      }
      public static void inc2(ref int n)      // Call By Ref
      {
          ++n;
      }

      public static void Main()
      {
          int n1 = 10;
          inc1(n1);
          Console.WriteLine(n1);          // 10 (Call By Value)

          int n2 = 10;
          inc2(ref n2);
          Console.WriteLine(n2);          // 11 (Call By Ref)
      }
  }
  ```

<br>

## Out ì „ë‹¬ ë°©ì‹

2ê°œ ì´ìƒì˜ ê²°ê³¼ ê°’ì„ ë°˜í™˜í•˜ê³  ì‹¶ì„ ê²½ìš°?

1. refì‚¬ìš©

   ```C#
   public static int prev_next_number1(int n, ref int r)
   {
       int a = r; // ok
       r = n + 1;
       return n - 1;
   }

    ~~~

    int result1 = prev_next_number1(n1, ref result2);

   ```

2. outì‚¬ìš©

   ```C#
   public static int prev_next_number2(int n, out int r)
    {
        //int a = r; // error ì½ê¸° ì•ˆë¨.
        r = n + 1;
        return n - 1;
    }

    ~~~

    int result1 = prev_next_number2(n1, out result2);

   ```

| ì•„ë¬´ê²ƒë„ ì—†ëŠ” ê²½ìš°                     | ref                                  | out                                  |
| -------------------------------------- | ------------------------------------ | ------------------------------------ |
| ë³µì‚¬ë³¸ ìƒì„±                            | Read / Write ëª¨ë‘ ê°€ëŠ¥               | Write Only                           |
| ì›ë³¸ ë³€ìˆ˜ì— ì ‘ê·¼ ë¶ˆê°€                  | ì´ˆê¸°í™” ëœ ë³€ìˆ˜ë§Œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.       | ì´ˆê¸°í™” ë˜ì§€ ì•Šì€ ê°’ë„ ê°€ëŠ¥           |
| ì‚¬ì´ë“œ ì´íŒ©íŠ¸ ì£¼ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš° ì‚¬ìš© | ë³€ìˆ˜ì˜ ê°’ì„ ë³€ê²½ í•˜ê³  ì‹¶ì„ ê²½ìš° ì‚¬ìš© | 2ê°œì˜ ê°’ì„ ë°˜í™˜í•˜ê³  ì‹¶ì„ë•Œ ì£¼ë¡œ ì‚¬ìš© |

<br>

# Ref Type

refëŠ” Valueì™€ ë‹¤ë¥´ê²Œ ì£¼ì†Œê°’ì„ ê°€ì§€ê³  ìˆì–´ì„œ ìˆ˜ì •í•  ê²½ìš° ì •ìƒì ìœ¼ë¡œ ìˆ˜ì •ì´ ëœë‹¤.

âŒ í•˜ì§€ë§Œ ë‚´ë¶€ì—ì„œ ìƒˆë¡œìš´ ê°ì²´ì— í• ë‹¹í•´ì£¼ë©´ ì›í•˜ëŠ” ëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

    ```C#
    public static void f1(Point p)      // Point p = p1
    {
        p.x = 2;                        // p1ì˜ xëŠ” 2ë¡œ ë°”ë€œ
        p = new Point(5, 5);
        // pê°€ ê°€ë¥´í‚¤ëŠ” ê°ì²´ëŠ” 5ê°€ ë˜ì—ˆìœ¼ë‚˜ p1ì´ ê°€ë¥´í‚¤ëŠ” ê³³ì€ ê·¸ëŒ€ë¡œì„
    }

    public static void Main()
    {
        Point p1 = new Point(1, 1);
        f1(p1);
        Console.WriteLine(p1.x);        //out 2
    }
    ```

- refì‚¬ìš©

  refë¥¼ ì‚¬ìš©í•´ì„œ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²° í•§ ìˆ˜ ìˆë‹¤.

  ğŸ’¡ refëŠ” heapì˜ì—­ì„ ê°€ë¥´í‚¤ëŠ” ê²ƒì´ ì•„ë‹Œ Stackì˜ì—­ì„ ê°€ë¥´í‚¨ë‹¤.

  ```C#
  public static void f2(ref Point p)  // ref Point p = refp1
  {
      p.x = 2;
      p = new Point(5, 5);
  }

  public static void Main()
  {
      Point p1 = new Point(1, 1);
      f2(ref p1);
      Console.WriteLine(p1.x);        //out 5, ì„±ê³µì ìœ¼ë¡œ ë°”ë€œ
  }
  ```

Ref Type ì„ ì „ë‹¬ í• ë•Œ

|                           | ê°’ì „ë‹¬ | ref |
| ------------------------- | ------ | --- |
| ìƒíƒœ ë³€ê²½ ì—¬ë¶€            | â­•     | â­•  |
| ìƒˆë¡œìš´ ê°ì²´ë¥¼ ëŒ€ì¹˜ í•˜ëŠ”ê²ƒ | âŒ     | â­•  |

<br>

ê°’ì„ ê·¸ëŒ€ë¡œ ì „ë‹¬ í•˜ëŠ” ê²½ìš° (f1)

<img src="../Image/RefType_Nomal.png" width=48%/>

refë¥¼ ì‚¬ìš©í•œ ê²½ìš° (f2)

<img src="../Image/RefType_Ref.png" width=48%/>
