# ëª©ì°¨

---

<br>

# Coroutineì´ë€?

ì¼ë°˜ì ìœ¼ë¡œ í•¨ìˆ˜ í˜¸ì¶œì€ í•¨ìˆ˜ì˜ ë³¸ë¬¸ì´ ëë‚œ ë’¤ì— í˜¸ì¶œí•œ ê³µê°„ìœ¼ë¡œ ì´ë™í•œë‹¤.

    SUB_ROUTINE

í•˜ì§€ë§Œ ì½”ë£¨í‹´ì€ ì‹¤í–‰ ë¶„ê¸°ë¥¼ ì¡°ì ˆ í•  ìˆ˜ ìˆë‹¤.

    ex) ì¼ë¶€ ì‹¤í–‰í›„ í˜¸ì¶œí•œ ê³³ìœ¼ë¡œ ì´ë™

    CO_ROUTINE (ëŒ€ë“±í•˜ê²Œ ë™ì‘)

<img src="../Image/CorutineFlow.png" width=500vp/>

<br>

## C# ê³¼ Coroutine

- C# ì—ì„œëŠ” Coroutineì„ ì™„ë²½í•˜ê²Œ ì§€ì›í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

- Collectionì˜ ì—´ê±°ìë¥¼ ë§Œë“¤ë•Œ ì¼ë¶€ ì§€ì›í•œë‹¤.

- LINQë“±ì´ Coroutine ê°œë…ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì„±ë˜ì–´ ìˆìŒ.

<br>

## Corutineê³¼ Enumerator

ëª¨ë“  ì»¬ë ‰ì…˜ì€ ì—´ê±°ìë¥¼ ë°˜í™˜ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

- ì»¬ë ‰ì…˜ ìì‹ ë§Œì˜ `ì—´ê±°ì íƒ€ì…ì„ ì„¤ê³„` í•´ì•¼ í•œë‹¤.

Corutineì„ ì‚¬ìš©í•œ ì—´ê±°ì ë§Œë“¤ê¸°

- ë³„ë„ì˜ ì—´ê±°ì íƒ€ì…ì´ í•„ìš” ì—†ë‹¤.

- GetEnumerator()ì—ì„œ "ì»¬ë ‰ì…˜ì´ ê°€ì§„ ëª¨ë“  ìš”ì†Œì— ëŒ€í•´ yield retrun ìˆ˜í–‰"

```C#
public IEnumerator GetEnumerator()
{
    //return new ì—´ê±°ì

    Node current = head;

    while (current != null)
    {
        return current.data;

         current = current.next;
    }
}
```

ì´ë ‡ê²Œ êµ¬í˜„í•  ê²½ìš° ë¬¸ì œ

1. retrun Typeì´ í‹€ë¦¬ë‹¤ (int != IEnumerator)

2. whileë¬¸ì„ í•œë²ˆë§Œ ëˆë‹¤.

ğŸ’¡ í•´ê²°
=> `return current.data;` ë¥¼ `yield return current.data;`ë¡œ ë³€ê²½í•œë‹¤.

(ì½”ë“œ)[../Code/enumertor_Imp3.cs]

<br>

<img src="../Image/CorutineFlow2.png" width=500vp/>

# Coroutine ìƒì„±ë²•

1. ë§Œë“œëŠ” ë°©ë²•

   ë°˜í™˜ íƒ€ì…ì„ ì•„ë˜ì˜ 4ê°€ì§€ ì¤‘ì— ì„ íƒ í•´ì•¼í•¨

   - Objectíƒ€ì… ë°˜í™˜

     1. IEnumerator
     2. IEnumerable

   - T íƒ€ì… ë°˜í™˜

     3. IEnumerator<T>
     4. IEnumerable<T>

   ë°˜í™˜ ë°©ë²• `yield retrun {ë°˜í™˜ê°’}`

2. í˜¸ì¶œ ë°©ë²•

   ë©”ì„œë“œ í˜¸ì¶œ í›„ "ì—´ê±°ì ì°¸ì¡° ì–»ê¸°"

   "{ì—´ê±°ì}.MoveNext()"ë¡œ í˜¸ì¶œ

   ë©”ì„œë“œê°€ `yield retrun`í•œ ê°’ì€ `{ì—´ê±°ì}.Current`ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìˆë‹¤.

- SubRoutine

```C#
public static int Foo()
{
    Console.WriteLine("1"); return 10;
    //ì¼ë°˜ì ìœ¼ë¡œ ì´ ì•„ë˜ëŠ” ì‹¤í–‰ì´ ì•ˆë¨.
    Console.WriteLine("2"); return 20;
    Console.WriteLine("3"); return 30;
    Console.WriteLine("4"); return 40;
    Console.WriteLine("5"); return 50;
}

public static void Main()
{
    int n1 = Foo();
    IEnumerator<int> e = Goo();
    IEnumerable<int> c = Hoo();
    IEnumerator<int> e2 = c.GetEnumerator();
    e.MoveNext();
    e2.MoveNext();
    Console.WriteLine($"SubRoutine {n1}");
    e.MoveNext();
    e2.MoveNext();
    Console.WriteLine($"SubRoutine {n1}");
}
```

- Corutine (ì—´ê±°ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜)

  ì¼ë°˜ì ìœ¼ë¡œ ì´ì™€ ê°™ì´ êµ¬í˜„í•¨.

  ```C#
  //Coroutine - ì—´ê±°ì ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜
  public static IEnumerator<int> Goo()
  {
      Console.WriteLine("1"); yield return 10;
      Console.WriteLine("2"); yield return 20;
      Console.WriteLine("3"); yield return 30;
      Console.WriteLine("4"); yield return 40;
      Console.WriteLine("5"); yield return 50;
  }

  public static void Main()
  {
      IEnumerator<int> e = Goo();
      e.MoveNext();
      Console.WriteLine($"Coroutine : {e.Current}");
      e.MoveNext();
      Console.WriteLine($"Coroutine : {e.Current}");
  }
  ```

- Coroutine - ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜

  LINQê°€ ì´ë ‡ê²Œ í•¨.

  ```C#
  //Coroutine - ì»¬ë ‰ì…˜ ì¸í„°í˜ì´ìŠ¤ë¡œ ë°˜í™˜
  public static IEnumerable<int> Hoo()
  {
      Console.WriteLine("1"); yield return 10;
      Console.WriteLine("2"); yield return 20;
      Console.WriteLine("3"); yield return 30;
      Console.WriteLine("4"); yield return 40;
      Console.WriteLine("5"); yield return 50;
  }

  public static void Main()
  {
    IEnumerable<int> c = Hoo();
    IEnumerator<int> e2 = c.GetEnumerator();
    e2.MoveNext();
    Console.WriteLine($"Coroutine Collection {e2.Current}");

    e2.MoveNext();
    Console.WriteLine($"Coroutine Collection {e2.Current}");
  }
  ```

[ì½”ë“œ]()