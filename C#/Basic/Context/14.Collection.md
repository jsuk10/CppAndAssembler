# 목차

---

# Collection 이란?

- 동일 타입을 여러개 보관 할 수 있는 클래스

- 자료구조를 구현한 클래스

  ex) Array(배열), List, Tree등

- Collection(Java, C#), Container(C++) 이라고 부른다.

- 다양한 타입에 대한 컬렉션이 지원 되어야 한다.

- 어떤 타입을 보관할 것인가?

  1. System.Objec

     `Ststem.Collection`

     타입 안정성이 낮음

     = 이상한 객체 저장해도 오류가 안난다.

     값을 꺼낼때 케스팅 필요

     - 객체를 Object로 저장하기 떄문

     Generic 추가 전에 사용

     ex) `ArrayList c1 = new ArrayList();`

<br>

2. 특정 타입만 저장.

   `Collections.Specialized`

   타입 안정성이 높다.

   자주 사용하는 데이터만 있다.(string, int)

   ex) `StringCollection c2 = new StringCollection();`

<br>

3. Generic

   `Collections.Generic`

   타입 안정성이 높다.

   여러 데이터에 사용가능하다.

   ex) `List<int> c3 = new ArrayList()`

<br>

4. Thread safe

   Collections.Concurrent

# Collection Interface

서로 다른 컬렉션에 있는 "동일한 기능을 수행하는 메서드" 이름은 동일하게 하는 것이 좋다.

- 인터페이스 기반으로 설계

- Collection관련 주요 인터페이스

  1.  `IEnumerable<T> (IEnumerable)`

      열거자 (반복자) 를 꺼내기 위한 GetEnumerator() 메소드를 제공

      모든 컬렉션이 구현

  2.  `ICollecion<T> (ICollecion)`

      Add(), Clear()을 제공

      대부분의 컬랙션 지원

  3.  `IList<T> (List)`

      this[int index]와 같은 기능을 제공

      일부컬렉션만 구현

      주로 연속된 메모리를 사용하는 Collection이 구현함.

# 열거자 Enumerator

IList<T> 인터페이스를 구현한 컬렉션은 인덱서를 제공

LinkedList<T> 와 같이 연속되지 않은 자료구조는 인덱서를 제공하지 않는다.

- C#에서는 "반복자" 대신 "열거자" 용어를 사용

  모든 컬렉션은 `IEnumerable<T> (IEnumerable)`를 구현한다.

- 열거자(Enumerator)를 꺼내는 GetEnumerator()을 제공한다.

  ```C#
  IEnumerator<int> e1 = c1.GetEnumerator();
  ```

<br>

열거자 함수

1.  `MoveNext()`

    최초 호출시 초기화 (그냥 뽑으면 초기화 안됨.)

    - 이것을 만듬으로 While문을 만들때 유용해짐.

    bool값을 반환, 다음으로 이동 불가시 false

2.  `Current()`

    해당 값 반환

3.  `Reset()`

    초기 상태로 (GetEnumerator로) 초기화함..

```C#
public static void Main()
{
    int[] array = { 1, 2, 3, 4, 5 };

    List<int> c1 = new List<int>(array);
    LinkedList<int> c2 = new LinkedList<int>(array);

    IEnumerator<int> e1 = c1.GetEnumerator();
    var e2 = c2.GetEnumerator();

    //최초 호출 = 초기화, 이동 불가시 false
    while (e1.MoveNext())
    {
        Console.WriteLine(e1.Current);  // 1, 2, 3, 4, 5
    }
    e1.Reset();                 //최초상태 초기화
}

```

## 열거자, foreach원리.

foreach또한 열거자로 구현되어 있다.

```C#
foreach (int n in c1)
{
   Console.WriteLine(n);
}
```

컴파일러는 위와 같은 코드를 아래로 변환한다.

```C#
for (IEnumerable<int> p = c1.GetEnumerator(); p.MoveNext();)
{
   int n = p.Current;
   Console.WriteLine(n);
}
```
